<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<style>
.btn-toggle {
	padding: .25rem .5rem;
	font-weight: 600;
	color: var(- -bs-emphasis-color);
	background-color: transparent;
}

.btn-toggle:hover, .btn-toggle:focus {
	color: rgba(var(- -bs-emphasis-color-rgb), .85);
	background-color: var(- -bs-tertiary-bg);
}

.btn-toggle::before {
	width: 1.25em;
	line-height: 0;
	content:
		url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='rgba(0,0,0,.5)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 14l6-6-6-6'/%3e%3c/svg%3e");
	transition: transform .35s ease;
	transform-origin: .5em 50%;
}

.btn-toggle[aria-expanded="true"] {
	color: rgba(var(- -bs-emphasis-color-rgb), .85);
}

.btn-toggle[aria-expanded="true"]::before {
	transform: rotate(90deg);
}

.btn-toggle-nav a {
	padding: .1875rem .5rem;
	margin-top: .125rem;
	margin-left: 1.25rem;
}

.btn-toggle-nav a:hover, .btn-toggle-nav a:focus {
	background-color: var(- -bs-tertiary-bg);
}

.btn:hover {
	border: 1px solid #ddd;
}

.modal-config {
	width: 700px !important;
}

[data-exit] {
	top: 8px;
	right: 8px;
}
.a-menu:hover > span {
	border-bottom: 3px solid #1A66CC;
}
</style>
<link rel="stylesheet" href="${pageContext.request.contextPath }/resources/project/css/modal/approval-main.css">
<link rel="stylesheet" href="${pageContext.request.contextPath }/resources/project/css/modal/interactive-modal.css">
<div class="card position-relative overflow-hidden rounded-0">
	<div class="shop-part d-flex w-100">
		<div class="flex-shrink-0" style="border-right: 1px solid #ddd; width: 13%">
			<div class="px-9 pt-4 pb-3">
				<a href="/drive">
					<h3 class="mb-4" style="font-weight: 600;">자료실</h3>
				</a>
			</div>
			<div class="py-3">
				<a href="#" class="w-100 d-block a-menu">
					<span class="fs-6 ms-5">전사자료실</span>
				</a>
			</div>
			<div class="py-3">
				<a href="#" class="w-100 d-block a-menu">
					<span class="fs-6 ms-5">부서자료실</span>
				</a>
			</div>
			<div class="py-3">
				<a href="#" class="w-100 d-block a-menu">
					<span class="fs-6 ms-5">개인자료실</span>
				</a>
			</div>
		</div>
		<div class="card-body p-4 pb-0" style="min-height: 85vh;">
			<div class="d-flex align-items-center gap-6 mb-2">
				<h5 class="fs-5 mb-0 d-none d-lg-block flex-grow-1">전사 자료실</h5>
				<form class="position-relative">
					<input type="text" class="form-control search-chat py-2 ps-5 rounded-0" id="drive-search" placeholder="파일 검색...">
					<i class="ti ti-search position-absolute top-50 start-0 translate-middle-y fs-6 text-dark ms-3"></i>
				</form>
				<button class="btn btn-outline-light-indigo text-dark fw-semibold rounded-0 py-8 px-5" id="drive-upload">파일 업로드</button>
			</div>
			<div class="w-100 p-2 pb-3" style="border-bottom: 1px solid #ddd;">
				<div class="d-inline-block">
					<a href="#" class="me-2">
						<i class="fa-sharp fa-regular fa-folder fa-xl fa-fw"></i> <span>새폴더</span>
					</a>
					<a href="#" class="me-2">
						<i class="fa-sharp fa-regular fa-arrow-down-to-line fa-xl fa-fw"></i> <span>다운로드</span>
					</a>
					<a href="#" class="me-2">
						<i class="fa-sharp fa-regular fa-trash fa-xl fa-fw"></i> <span>삭제</span>
					</a>
					<a href="#" class="me-2">
						<i class="fa-sharp fa-regular fa-file-zipper fa-xl fa-fw"></i> <span>목록 다운로드</span>
					</a>
				</div>
				<a href="#" class="float-end">
					<i class="fa-sharp fa-regular fa-filter fa-xl fa-fw"></i> <span>필터</span>
				</a>
			</div>
			<div class="w-100">
				<table class="table table-responsive table-borderless table-hover" id="tbl">
					<colgroup>
						<col width="5%">
						<col width="65%">
						<col width="10%">
						<col width="10%">
						<col width="15%">
					</colgroup>
					<thead style="border-bottom: 1px solid #ddd;">
						<tr>
							<th>
								<input type="checkbox" class="form-check-input" id="selectAll" />
							</th>
							<th>이름</th>
							<th>크기</th>
							<th>확장자</th>
							<th>등록날짜</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>
								<input type="checkbox" class="form-check-input" name="select" />
							</td>
							<td>
								<span class="me-2">테스트 파일명</span>
								<button class="btn btn-sm rounded-0" style="border: 1px solid #ddd;">미리보기</button>
								<button class="btn btn-sm rounded-0" style="border: 1px solid #ddd;">다운로드</button>
							</td>
							<td>1.1MB</td>
							<td>jpg</td>
							<td>2024.04.27</td>
						</tr>
						<tr>
							<td>
								<input type="checkbox" class="form-check-input" name="select" />
							</td>
							<td>
								<span class="me-2">테스트 파일명2</span>
								<button class="btn btn-sm rounded-0" style="border: 1px solid #ddd;">다운로드</button>
							</td>
							<td>2.2MB</td>
							<td>xlsx</td>
							<td>2024.04.27</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<div id="drive-upload-modal" class="interactive-modal" style="z-index: 1;">
	<div class="interactive-modal-content modal-config">
		<header class="position-relative p-4">
			<h5 class="font-weight-bold">파일 업로드</h5>
			<a href="#" class="position-absolute fa-active" data-exit="drive-upload">
				<i class="fa-regular fa-xmark fa-fw fa-xl fa"></i>
			</a>
		</header>
		<div class="row mt-2">
			<div class="col-md-5" id="">
				<div class="searchInput input-group">
					<input type="text" id="search-input" class="form-control rounded-0" maxlength="20" placeholder="양식제목" />
					<button type="button" class="btn btn-dark bg-dark rounded-0">
						<i class="fa-light fa-magnifying-glass fa-xl fa-fw"></i>
					</button>
				</div>
				<div id="tree" style="height: 300px;"></div>
			</div>
			<div class="col-7 doc-detail" id="">
				<div class="card rounded-0">
					<div class="p-2 approval-gray border-bottom">
						<span class="text-start font-weight-bold text-dark m-2">상세정보</span>
					</div>
					<div class="card-body rounded-0 p-0">
						<table class="table table-borderless text-center align-middle">
							<tr>
								<th>제목</th>
								<td data-title=""></td>
							</tr>
							<tr class="">
								<th>전사문서함</th>
								<td>문서함</td>
							</tr>
							<tr class="">
								<th>기안부서</th>
								<td>
									<select name="" id="" class="form-select rounded-0">
										<option value="">다우그룹</option>
									</select>
								</td>
							</tr>
							<tr class="">
								<th>부서문서함</th>
								<td>
									<select name="" id="" class="form-select rounded-0">
										<option value="">미지정</option>
									</select>
								</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="footer text-end doc-footer mt-3">
			<a href="#" class="btn btn-secondary rounded-0" id="uploadBtn">
				<span>확인</span>
			</a>
			<a href="#" class="btn btn-muted rounded-0 ms-2" id="cancelBtn">
				<span>취소</span>
			</a>
		</div>
	</div>
</div>

<script>
	$(function() {
		let driveUpload = $('#drive-upload');
		let driveUploadModal = $('#drive-upload-modal');
		let uploadBtn = $('#uploadBtn');
		let cancelBtn = $('#cancelBtn');
		let modalExit = $('[data-exit]');

		driveUpload.on('click', function(e) {
			e.preventDefault();
			toggleDriveUploadModal();
		});

		$(document).on('click', function(e) {
			if ($(e.target).is(driveUploadModal)) {
				toggleDriveUploadModal();
			}
		});

		modalExit.on('click', function(e) {
			if ($(this).data('exit') == 'drive-upload') {
				e.preventDefault();
				toggleDriveUploadModal();
			}
		});

		uploadBtn.on('click', function() {
			toggleDriveUploadModal();
		});

		cancelBtn.on('click', function() {
			toggleDriveUploadModal();
		});

		function toggleDriveUploadModal() {
			driveUploadModal.toggleClass('show');
		}

	});

	$('#tbl').on('change', 'input[type="checkbox"]', function() {
		if ($(this).attr('id') == 'selectAll') {
			if ($(this).is(":checked"))
				$("input[name=select]").prop("checked", true);
			else
				$("input[name=select]").prop("checked", false);
		} else {
			if ($(this).attr('name') == 'select') {
				var total = $("input[name=select]").length;
				var checked = $("input[name=select]:checked").length;

				if (total != checked)
					$("#selectAll").prop("checked", false);
				else
					$("#selectAll").prop("checked", true);
			}
		}
	});
</script>